<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Valentine?</title>

<style>
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; background:#000; overflow:hidden;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

.slideshow{position:fixed; inset:0; z-index:-1}
.slide{
  position:absolute; inset:0;
  background-size:cover; background-position:center;
  opacity:0; animation:fade 40s infinite;
}
.slide:nth-child(1){background-image:url("bg1.jpg"); animation-delay:0s}
.slide:nth-child(2){background-image:url("bg2.jpg"); animation-delay:8s}
.slide:nth-child(3){background-image:url("bg3.jpg"); animation-delay:16s}
.slide:nth-child(4){background-image:url("bg4.jpg"); animation-delay:24s}
.slide:nth-child(5){background-image:url("bg5.jpg"); animation-delay:32s}
@keyframes fade{0%{opacity:0}10%{opacity:1}40%{opacity:1}50%{opacity:0}100%{opacity:0}}

.container{min-height:100vh; display:grid; place-items:center}
.card{
  width:520px; max-width:92%;
  background:rgba(255,255,255,.72);
  backdrop-filter:blur(10px);
  border-radius:26px; padding:22px;
  text-align:center;
}

.buttons{
  position:relative;
  height:220px;
  margin-top:12px;
}

button{
  position:absolute;
  min-width:170px;
  padding:14px 22px;
  border:none;
  border-radius:999px;
  font-size:18px;
  font-weight:650;
  cursor:pointer;
}

#yes{background:#ff4d6d; color:#fff; z-index:1}
#no{background:#adb5bd; color:#fff; z-index:3}

.note{margin-top:10px; font-size:13px; color:#444}
</style>
</head>

<body>

<div class="slideshow">
  <div class="slide"></div><div class="slide"></div><div class="slide"></div>
  <div class="slide"></div><div class="slide"></div>
</div>

<div class="container">
  <div class="card" id="card">
    <h1>Hi Amber 💌</h1>
    <p>Will you be my Valentine?</p>

    <div class="buttons" id="arena">
      <button id="yes">YES 💖</button>
      <button id="no">NO 🙃</button>
    </div>

    <div class="note">careful, dont anyhow press wrong ah bao</div>
  </div>
</div>

<script>
const arena = document.getElementById("arena");
const yesBtn = document.getElementById("yes");
const noBtn  = document.getElementById("no");
const card   = document.getElementById("card");

let noClicks = 0;
let yesMode = "ERRATIC"; // ERRATIC → SLOW → STATIC
let rafYes = null;
let rafNo  = null;

/* ---------- helpers ---------- */
function clamp(n,min,max){return Math.max(min,Math.min(max,n))}
function setPos(btn,x,y){
  const a=arena.getBoundingClientRect(), w=btn.offsetWidth, h=btn.offsetHeight;
  btn.style.left = clamp(x,10,a.width-w-10)+"px";
  btn.style.top  = clamp(y,10,a.height-h-10)+"px";
}
function centerYes(){
  const a=arena.getBoundingClientRect();
  setPos(yesBtn,(a.width-yesBtn.offsetWidth)/2,20);
}

/* ---------- YES motion ---------- */
let yPos={x:0,y:0}, vel={x:200,y:160}, target={x:0,y:0};

function randomSpot(){
  const a=arena.getBoundingClientRect();
  return {
    x:Math.random()*(a.width-yesBtn.offsetWidth),
    y:60+Math.random()*(a.height-yesBtn.offsetHeight-80)
  };
}

function yesTick(){
  if(yesMode==="STATIC") return;

  if(yesMode==="ERRATIC"){
    vel.x+=(Math.random()*2-1)*120;
    vel.y+=(Math.random()*2-1)*120;
    yPos.x+=vel.x*0.016;
    yPos.y+=vel.y*0.016;
  }

  if(yesMode==="SLOW"){
    const dx=target.x-yPos.x, dy=target.y-yPos.y;
    const d=Math.hypot(dx,dy);
    if(d<6) target=randomSpot();
    else{
      yPos.x+=dx*0.02;
      yPos.y+=dy*0.02;
    }
  }

  setPos(yesBtn,yPos.x,yPos.y);
  rafYes=requestAnimationFrame(yesTick);
}

/* ---------- NO guard (independent loop) ---------- */
function noGuardTick(){
  const y=yesBtn.getBoundingClientRect();
  const a=arena.getBoundingClientRect();
  setPos(
    noBtn,
    (y.left-a.left)+(y.width-noBtn.offsetWidth)/2,
    (y.top-a.top)+(y.height-noBtn.offsetHeight)/2
  );
  rafNo=requestAnimationFrame(noGuardTick);
}

/* ---------- difficulty progression ---------- */
function updateDifficulty(){
  cancelAnimationFrame(rafYes);
  cancelAnimationFrame(rafNo);

  if(noClicks===0){
    yesMode="ERRATIC";
  } else if(noClicks===1){
    yesMode="SLOW";
    target=randomSpot();
  } else {
    yesMode="STATIC";
    centerYes();
  }

  yPos={x:yesBtn.offsetLeft,y:yesBtn.offsetTop};
  rafYes=requestAnimationFrame(yesTick);
  rafNo=requestAnimationFrame(noGuardTick);
}

/* ---------- interactions ---------- */
noBtn.onclick=()=>{
  noClicks++;
  if(noClicks===1){
    alert("😳 Careful ah… still got 2 chances.");
    updateDifficulty();
  } else if(noClicks===2){
    alert("🚨 LAST WARNING.\nClick NO again and the date is cancelled.");
    updateDifficulty();
  } else {
    cancelAnimationFrame(rafYes);
    cancelAnimationFrame(rafNo);
    card.innerHTML=`
      <h1 style="color:#888;">Date Cancelled</h1>
      <p>You pressed NO 3 times 😔</p>
    `;
  }
};

yesBtn.onclick=()=>{
  cancelAnimationFrame(rafYes);
  cancelAnimationFrame(rafNo);
  card.innerHTML=`
    <h1>💘 It’s a Date 💘</h1>
    <p><strong>14 February</strong></p>
    <p>Dinner at <strong>Le Petit Paris</strong></p>
    <p>15 Swan Lake Avenue<br>Singapore 455711</p>
  `;
};

/* ---------- init ---------- */
window.onload=()=>{
  centerYes();
  yPos={x:yesBtn.offsetLeft,y:yesBtn.offsetTop};
  updateDifficulty();
};
</script>

</body>
</html>
