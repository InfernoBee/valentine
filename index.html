<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Valentine?</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100svh;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow: hidden;
  background: #000;
  -webkit-tap-highlight-color: transparent;
}

/* ===== BACKGROUND SLIDESHOW ===== */
.slideshow {
  position: fixed;
  inset: 0;
  z-index: -1;
}
.slide {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0;
  animation: fade 40s infinite;
}
.slide:nth-child(1){ background-image:url("bg1.jpg"); animation-delay:0s;}
.slide:nth-child(2){ background-image:url("bg2.jpg"); animation-delay:8s;}
.slide:nth-child(3){ background-image:url("bg3.jpg"); animation-delay:16s;}
.slide:nth-child(4){ background-image:url("bg4.jpg"); animation-delay:24s;}
.slide:nth-child(5){ background-image:url("bg5.jpg"); animation-delay:32s;}

@keyframes fade {
  0%{opacity:0;}
  10%{opacity:1;}
  40%{opacity:1;}
  50%{opacity:0;}
  100%{opacity:0;}
}

/* ===== UI ===== */
.container{
  min-height:100svh;
  display:grid;
  place-items:center;
  padding:16px;
}

/* GLASS CARD */
.card{
  width:min(520px,100%);
  background:rgba(255,255,255,0.72);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius:26px;
  padding:22px 20px 26px;
  text-align:center;
  box-shadow:0 20px 45px rgba(0,0,0,.25);
}

h1{
  margin:6px 0 8px;
  font-size:34px;
  color:#d6336c;
}

p{
  margin:0 0 14px;
  font-size:17px;
  color:#333;
}

/* ===== BUTTON ARENA ===== */
.buttons{
  position:relative;
  height:140px;
  max-width:420px;
  margin:10px auto 0;
}

button{
  border:none;
  border-radius:999px;
  padding:14px 22px;
  font-size:18px;
  font-weight:650;
  min-width:150px;
  cursor:pointer;
  user-select:none;
  touch-action:manipulation;
}

/* YES */
#yes{
  background:#ff4d6d;
  color:#fff;
  position:absolute;
  left:50%;
  top:18px;
  transform:translateX(-50%);
  z-index:1;
}

/* NO (on top) */
#no{
  background:#adb5bd;
  color:#fff;
  position:absolute;
  top:18px;
  z-index:3;
  transition:left 120ms linear, top 120ms linear;
}

.note{
  margin-top:12px;
  font-size:13px;
  color:#444;
}

/* HEARTS */
.heart{
  position:fixed;
  font-size:22px;
  pointer-events:none;
  animation:float 2.8s ease-out forwards;
}
@keyframes float{
  0%{opacity:1; transform:translateY(0) scale(1);}
  100%{opacity:0; transform:translateY(-140px) scale(1.6);}
}

.map-btn{
  display:inline-block;
  margin-top:12px;
  padding:12px 18px;
  background:#ff4d6d;
  color:#fff;
  border-radius:999px;
  text-decoration:none;
  font-weight:600;
}
</style>
</head>

<body>

<div class="slideshow">
  <div class="slide"></div><div class="slide"></div><div class="slide"></div>
  <div class="slide"></div><div class="slide"></div>
</div>

<div class="container">
  <div class="card" id="card">
    <h1>Hi Amber 💌</h1>
    <p>Will you be my Valentine?</p>

    <div class="buttons" id="arena">
      <button id="yes">YES 💖</button>
      <button id="no">NO 🙃</button>
    </div>

    <div class="note">careful, dont anyhow press wrong ah bao</div>
  </div>
</div>

<script>
const yesBtn = document.getElementById("yes");
const noBtn  = document.getElementById("no");
const arena  = document.getElementById("arena");
const card   = document.getElementById("card");

let phase = "BLOCK";
let timer = null;
let noClicks = 0;

function clamp(n,min,max){ return Math.max(min,Math.min(max,n)); }

function blockYes(){ yesBtn.style.pointerEvents="none"; }
function allowYes(){ yesBtn.style.pointerEvents="auto"; }

function setNo(x,y){
  const a=arena.getBoundingClientRect();
  noBtn.style.left = clamp(x,10,a.width-noBtn.offsetWidth-10)+"px";
  noBtn.style.top  = clamp(y,10,a.height-noBtn.offsetHeight-10)+"px";
}

/* NO covers YES */
function placeOverYes(){
  const y=yesBtn.getBoundingClientRect();
  const a=arena.getBoundingClientRect();
  setNo(
    (y.left-a.left)+(y.width-noBtn.offsetWidth)/2,
    (y.top-a.top)+(y.height-noBtn.offsetHeight)/2
  );
  blockYes();
}

/* GAP: move FAR away so no overlap at all */
function placeGap(){
  const y=yesBtn.getBoundingClientRect();
  const a=arena.getBoundingClientRect();

  const farDistance = 220 + Math.random()*40; // clearly away
  const side = Math.random() < 0.5 ? -1 : 1;

  setNo(
    (y.left-a.left) + side * farDistance,
    (y.top-a.top)
  );
  allowYes();
}

/* HARD MODE LOOP */
function loop(){
  if(phase==="BLOCK"){
    placeOverYes();
    phase="GAP";
    timer=setTimeout(loop,2300);
  } else {
    placeGap();
    phase="BLOCK";
    timer=setTimeout(loop,350);
  }
}

setTimeout(()=>{ placeOverYes(); loop(); },80);

/* NO click logic */
noBtn.addEventListener("click",()=>{
  noClicks++;
  if(noClicks===1){
    alert("⚠️ If you click NO again, the restaurant date will be cancelled automatically.\n\nYou can try again.");
  } else {
    clearTimeout(timer);
    card.innerHTML=`
      <h1 style="color:#888;">Date Cancelled</h1>
      <p>Le Petit Paris reservation cancelled.</p>
      <p style="color:#666;">dont anyhow press next time 😔</p>
    `;
  }
});

/* YES click */
function hearts(){
  for(let i=0;i<18;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.textContent="💖";
    h.style.left=Math.random()*100+"vw";
    h.style.top="60vh";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),3000);
  }
}

yesBtn.addEventListener("click",()=>{
  clearTimeout(timer);
  hearts();
  card.innerHTML=`
    <h1>💘 It’s a Date 💘</h1>
    <p><strong>14 February</strong></p>
    <p>Dinner at <strong>Le Petit Paris</strong></p>
    <p style="font-size:15px;color:#444;">
      15 Swan Lake Avenue<br>
      Opera Estate, Singapore 455711
    </p>
    <a class="map-btn" target="_blank"
      href="https://www.google.com/maps/search/?api=1&query=Le+Petit+Paris+15+Swan+Lake+Avenue+Singapore">
      📍 Open in Google Maps
    </a>
    <p style="margin-top:12px;color:#555;">– Bryan</p>
  `;
});
</script>

</body>
</html>
